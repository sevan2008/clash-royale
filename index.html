<!DOCTYPE html>
<html lang="fr">
<head>
        <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WHQZ49VG');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <link rel="stylesheet" href="index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutoriel emote clash royale</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Lien vers la police Google -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet"> 
    <link rel="shortcut icon" href="unnamed.ico" type="image/x-icon">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHQZ49VG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- En-tête de la page -->
    <header>
        <!-- Titre principal -->
        <h1>Clash royal emotes tuto</h1>
        <!-- Navigation -->
        <nav>
            <!-- Instruction pour accéder à d'autres tutoriels -->
            <p>vous pouvez aussi retrouver d'autres tutos:</p>
            <!-- Boutons de navigation -->
            <button id="btn1">menu</button>
            <button id="btn2">emote roi énervé</button>
            <button id="btn3">emote roi pouce levé</button>
            <button id="btn4">emote roi pleure</button>
        </nav>
    </header>    
    <!-- Contenu principal -->
    <main>
        <!-- Description de l'emote -->
        <h2> Emote 4 : le roi content</h2>
        <p>voici comment faire le légendaire 'hihihiha' du roi qui est content:</p>
        <!-- Vidéo illustrative -->
        <video width="1500" height="360" controls>
            <source src="Clash Royale Hehe HaHa.mp4" type="video/mp4">
        </video>
        <!-- Étapes pour reproduire l'emote -->
        <p>voici les étapes pour que vous puissiez maîtriser cette emote:
            <button id="toggleList" onclick="déroulerliste()"> ↲</button>
        </p>
        
        <ul class="hidden" id="etapesList">
            <!-- Listes des étapes -->
            <li>entraînez-vous à sourire</li>
            <li>prononcez le premier 'hi'</li>
            <li>faites de même pour les deux prochains</li>
            <li>assemblez les</li>
            <li>rajoutez le 'ha'</li>
            <li>faites toutes les étapes en même temps</li>
        </ul>
        <!-- Enregistrement audio -->
        <p>teste ton emote et compare-toi au modèle! : </p>
        <button id="startRecording">Commencer l'enregistrement</button>
        <button id="stopRecording" disabled>Arrêter l'enregistrement</button>
        <div id="audioPlayback" style="display: none;">
          <h2>Votre enregistrement :</h2>
          <audio controls id="audioPlayer"></audio>
          <a id="downloadLink" download="enregistrement_audio.wav">Télécharger l'enregistrement</a>
      </div>
    </main>
    <!-- Pied de page -->
    <footer>
        <p>Sevan Ubeda</p>
    </footer>
    <!-- Script pour la gestion des pages et l'enregistrement audio -->
    <script>
        // Fonction pour dérouler la liste des étapes
        function déroulerliste(){
            var etapesList = document.getElementById("etapesList");
            etapesList.classList.toggle("hidden");
        }
        
        // Fonctions de redirection vers les différentes pages
        function ouvrirPage1() {
          window.location.href = "index.html";
        }
        function ouvrirPage2() {
          window.location.href = "clash royale emote enerve.html";
        }
        function ouvrirPage3() {
          window.location.href = "roi pouce leve.html";
        }
        function ouvrirPage4() {
          window.location.href = "clash royal emote pleure.html";
        }

        // Enregistrement audio
        let mediaRecorder;
        let audioChunks = [];

        navigator.mediaDevices.getUserMedia({ audio: true })
            .then(function(stream) {
                mediaRecorder = new MediaRecorder(stream);

                mediaRecorder.ondataavailable = function(e) {
                    audioChunks.push(e.data);
                };

                mediaRecorder.onstop = function() {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    const audioUrl = URL.createObjectURL(audioBlob);

                    const audioPlayer = document.getElementById('audioPlayer');
                    const downloadLink = document.getElementById('downloadLink');

                    audioPlayer.src = audioUrl;
                    downloadLink.href = audioUrl;

                    document.getElementById('audioPlayback').style.display = 'block';
                };

                document.getElementById('startRecording').addEventListener('click', function() {
                    audioChunks = [];
                    mediaRecorder.start();
                    document.getElementById('startRecording').disabled = true;
                    document.getElementById('stopRecording').disabled = false;
                });

                document.getElementById('stopRecording').addEventListener('click', function() {
                    mediaRecorder.stop();
                    document.getElementById('startRecording').disabled = false;
                    document.getElementById('stopRecording').disabled = true;
                });
            })
            .catch(function(err) {
                console.error('Permission to access microphone was denied:', err);
            });
                
        // Ajout des événements pour les boutons de navigation
        document.getElementById("btn1").addEventListener("click", ouvrirPage1);
        document.getElementById("btn2").addEventListener("click", ouvrirPage2);
        document.getElementById("btn3").addEventListener("click", ouvrirPage3);
        document.getElementById("btn4").addEventListener("click", ouvrirPage4);
    </script>
</body>

</html>

